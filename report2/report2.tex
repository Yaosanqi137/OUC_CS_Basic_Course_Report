
\documentclass[UTF8]{gyh}

\usepackage{amsmath}
\usepackage{cases}
\usepackage{cite}
\usepackage[margin=1in]{geometry}
\geometry{a4paper}
\usepackage{fancyhdr}
\usepackage{listings} % 添加 listings 宏包以使用 lstlisting 环境
\pagestyle{fancy}
\usepackage{graphicx}
\usepackage{indentfirst}
\usepackage{float}
\usepackage[hidelinks]{hyperref}
\usepackage{xcolor}   % 推荐添加，用于代码颜色

\lstset{
extendedchars=\true, % 开启扩展字符集，支持UTF-8
literate=
{<}{\textless}1
{>}{\textgreater}1,
frame=single               % 添加边框
}

\title{系统开发工具基础实验报告二}
\author{古宇恒}
\date{\today}
\pagenumbering{arabic}

\begin{document}

\fancyhead[C]{Shell 与 Vim}
\fancyfoot[C]{\thepage}

\maketitle
\tableofcontents
\newpage

\section{摘要}
本实验报告将实践 Shell 指令与脚本与 Vim 编辑器的使用，掌握使用 Linux 与 Shell 脚本的编写是计算机专业学生最基本的学科素养，是必学课程

本文开源地址：\href{https://github.com/Yaosanqi137/OUC_CS_Basic_Course_Report}{https://github.com/Yaosanqi137/OUC\_CS\_Basic\_Course\_Report}

\section{Shell的基本操作}

\subsection{通过SSH\ Client登入Linux}

在没有显示器连接计算机的时候，我们还可以通过 SSH 服务,通过默认端口22远程访问登录 Linux 操作系统。

注意，这里的 Linux 操作系统不像 Windows 操作系统一样，它并没有图形化桌面供用户操作，只能通过命令行操作。这里对系统的指令操作，我们称为 \boldsymbol{Shell} 指令。

当然，Linux 还有很多不同的发行版，比如 Debian、Ubuntu、CentOS、Kali 等等，当然，还有让人意想不到的，比如 \boldsymbol{OpenWrt} 路由器操作系统，基础用法大同小异，这篇文章就使用我宿舍路由器做演示。

使用 XShell SSH 客户机软件，输入以下指令登入路由器 SSH：

\begin{lstlisting}
ssh root@192.168.0.1 # root 表示登录账户，192.168.0.1 为路由器 IP 地址
\end{lstlisting}

在连接成功后将显示欢迎界面和命令输入栏，之后我们就可以开始我们的操作。

\photo{1}{img/img1.png}{SSH登入成功}

\subsection{查看当前文件夹内容}

进入命令行界面，无法直接看到当前目录内到底有什么东西，也不知道里面有什么东西。此时，我们可以输入这条命令查看当前目录到底有什么东西：

\begin{lstlisting}
ls -lah # 这里的 -lah 是附加参数，是可选的，日常一般只需要输入 ls
\end{lstlisting}

这里对附加参数做出解释：

\begin{enumerate}
\item -l： 列出目录中文件的详细信息，如创建时间，文件大小等。


\item -a： 列出目录中所有文件，包括隐藏文件和 .(代指本文件夹)、..(代指上级目录)。


\item -h： 在使用第一个参数的前提下，以人类可读的单位展示文件大小，因为默认使用的单位是字节，人很难看出具体大小。


\end{enumerate}
\photo{1}{img/img2.png}{列出目录下所有文件}

\subsection{查看当前所在文件夹}

虽然命令行侧边会直接显示目前登录的账户和所在目录，但这里也需要提出显示目前所在目录的指令

\begin{lstlisting}
pwd # 即 print work directory 的缩写
\end{lstlisting}

顺便一提，刚开始显示的波浪号路径，其实指的是 /root 路径。

\subsection{路由到其他文件夹}

当我们需要路由到其他路径时，我们可以使用下面这条指令：

\begin{lstlisting}
cd “路径”
\end{lstlisting}

其中，“路径”如果你什么都不填写，将会路由到 /root 或用户目录，如果填写 “..”，则会路由到目前所在文件夹的上级文件夹，如果填写 “.” 则不会进行路由。

\subsection{创建目录}

如果需要自己创建一个文件夹，我们可以输入这条指令：

\begin{lstlisting}
mkdir 文件夹名
\end{lstlisting}

很方便的是，如果你目前并不在你想要创建目录的目录下，你一样可以在前面加上目录的路径来创建文件夹，和下面的图示一样。

\photo{0.8}{img/img3.png}{在其他目录创建目录}

其中，后面的 grep 是常用方法，这条指令用于查找文件夹中是否存在指定名称的文件或者文件夹。

\subsection{文件删除操作}

如果需要删除文件或者文件夹，使用下面的这条指令

\begin{lstlisting}
rm -rf 文件 # 其中 -rf 参数可选
\end{lstlisting}

这里解释这两个参数的意思：

\begin{enumerate}
\item -r: 递归的删除，文件无所谓，但如果需要删除文件夹，必须带上这个参数。


\item -f: 确认删除，不然会询问你是否删除。


\end{enumerate}
\subsection{创建文件}

如果 mkdir 是创建文件夹，那么创建一个文件就需要另外一个指令了：

\begin{lstlisting}
touch 文件名
\end{lstlisting}

注意，如果该文件本身已经存在，那么你运行这条指令时，操作就不是创建文件，而是更新文件的时间戳了。

\subsection{移动文件}

如果需要移动文件或者文件夹，可以使用下面这条指令：

\begin{lstlisting}
mv -r 文件
\end{lstlisting}

这里的 -r 参数含义和 rm 指令完全一致，不再细说了。

\subsection{复制指令}

如果需要复制文件或者文件夹，可以使用下面这条指令：

\begin{lstlisting}
cp -r 文件
\end{lstlisting}

这里的 -r 参数含义和 rm 指令完全一致，不再细说了。

\subsection{查找文件}

如果需要在一个大目录下寻找文件或文件夹，你就需要这条指令：

\begin{lstlisting}
find 大路径 -name 文件名/目录名
\end{lstlisting}

具体效果如下图。

\photo{1}{img/img4.png}{查找文件}

\subsection{查看文件内容}

查看文件内容，可以使用下面这条指令：

\begin{lstlisting}
cat 文件名 文件名 ...
\end{lstlisting}

你可以使用这个指令同时查看多个文件的内容，直接将内容输出到控制台，比较方便

\subsection{查看网络配置}

如果需要查看主机的联网情况，我们可以使用以下两条指令：

\begin{lstlisting}
ip a # a 是 address 的缩写
\end{lstlisting}

使用这条指令就可以查看你的设备的所有网卡极其网卡配置、网卡ip等信息，非常方便。

\photo{0.6}{img/img5.png}{查看网络配置1}

\newpage
当然，现代的Linux发行版都预装了iproute2软件包，如果没有的话，可以尝试下面的指令:

\begin{lstlisting}
ifconfig
\end{lstlisting}

这条指令同样可以查看网卡配置等信息，也是很不错的

\photo{0.8}{img/img6.png}{查看网络配置2}

\section{Vim编辑器的基本使用}

Vim 是从 vi 发展出来的一个文本编辑器。 它功能强大，尤其是在代码补全、编译及错误跳转等方便编程的功能上。此外，现在还有其他 Vim 的分支，同样很受欢迎，比如 neoVim。

\subsection{Vim的模式}

Vim 有多种模式，最基本的是命令模式、插入模式和底线命令模式。

\begin{itemize}
\item \textbf{命令模式：} 用户刚刚启动  vi/vim ，便进入了命令模式。此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。
\item \textbf{插入模式：} 在命令模式下按下i就进入了插入模式。在插入模式中，敲击键盘的字符会输入到文本中。
\item \textbf{底线命令模式：} 在命令模式下按下:（英文冒号）就进入了底线命令模式。在底线命令模式中可以输入单个或多个字符的命令，可用的命令非常多。
\end{itemize}

\subsection{基本操作}

\subsubsection{进入与退出}

\begin{itemize}
\item \textbf{进入Vim：} 在Shell中输入 vim 文件名 即可打开或创建一个文件并进入Vim，也就是：

\begin{lstlisting}
vim 文件名
\end{lstlisting}

\item \textbf{退出Vim：} 在命令模式下，输入 :q 退出。如果文件被修改过，需要输入 :q! 强制退出而不保存。
\item \textbf{保存并退出：} 在命令模式下，输入 :wq 或 :x 保存文件并退出。
\end{itemize}

\subsubsection{插入文本}

在命令模式下，按 i 键进入插入模式，就可以像在普通文本编辑器中一样输入文本了。此时Vim在底部将会显示 "Insert" ，表示正在插入模式

\subsubsection{移动光标}

在命令模式下，可以使用方向键或者 h (左), j (下), k (上), l (右) 键来移动光标。

\subsubsection{删除文本}

在命令模式下，可以使用以下命令删除文本：
\begin{itemize}
\item \textbf{x：} 删除当前光标下的字符。
\item \textbf{dd：} 删除当前行。
\end{itemize}

\subsubsection{撤销与重做}

\begin{itemize}
\item \textbf{u：} 撤销上一步的操作。
\item \textbf{Ctrl + r：} 重做上一步被撤销的操作。
\end{itemize}

\subsubsection{定位到某行}

如果需要定位到文本的某一行，使用以下 Vim 指令：

\begin{lstlisting}
:行数
\end{lstlisting}

输入这条指令，按下回车就可以定位到指定行数。

\subsubsection{查找内容}

在需要查找文本中是否存在某内容，输入以下指令：

\begin{lstlisting}
/内容
\end{lstlisting}

按下回车，光标就可以定位到含此内容的地方，并将所寻内容高光标注，按下 n 键可以导航到下一个，如果寻找的内容不存在，则会提示内容不存在。

\photo{1}{img/img7.png}{无法查找到内容}

\section{Shell脚本编程}

Shell脚本是一个包含一系列命令的文件，这些命令可以被shell程序逐行执行。它可以让你将一系列复杂的操作自动化，从而节省时间。

\subsection{创建并执行Shell脚本}

\subsubsection{创建脚本}

使用 touch 命令创建一个新文件，例如 script.sh。然后使用Vim或其他文本编辑器打开它。

\subsubsection{编写脚本}

所有Shell脚本的第一行都应该是 #!/bin/bash，它告诉系统这个脚本应该由哪个解释器执行。 此外，常用的解释器还有 sh、zsh 等，但是一般是bash。

下面是一个简单的 “Hello World” 脚本示例：

\begin{lstlisting}
#!/bin/bash

echo "Hello, World!"
\end{lstlisting}

\subsubsection{执行脚本}

在执行脚本之前，需要给它添加可执行权限：

\begin{lstlisting}
chmod +x script.sh
\end{lstlisting}

然后，可以通过以下方式运行脚本：

\begin{lstlisting}
./script.sh
# 或者
bash script.sh
\end{lstlisting}

\subsection{变量}

在Shell脚本中，你可以定义和使用变量。

\begin{lstlisting}
#!/bin/bash
GREETING="Hello"
NAME="World"
echo "$GREETING, $NAME!"
\end{lstlisting}

此外，在非函数中，\$1、\$2...表示脚本接收的第 n 个形参，如果是在函数体中，则表示函数接收的第 n 个形参，此外 \$0 表示脚本的名字，\$#表示接收的形参数量。

\subsection{控制结构}

Shell脚本也支持条件语句和循环等控制结构。

\subsubsection{if-else语句}

\begin{lstlisting}
#!/bin/bash
read -p "输入一个数: " NUM
if [ $NUM -gt 10 ]
then
echo "这个数比10大"
else
echo "这个数不比10大"
fi
\end{lstlisting}

\subsubsection{for循环}

\begin{lstlisting}
#!/bin/bash
for i in {1..5}
do
echo "第 $i 次循环"
done
\end{lstlisting}

\section{总结}

通过本次实验，我熟练掌握了常用的Shell指令，能够通过命令行高效地管理Linux系统。同时，我也学习了Vim编辑器的基本操作，为将来在Linux环境下进行代码编写和文本编辑打下了坚实的基础。最后，通过编写简单的Shell脚本，我初步了解了如何利用脚本自动化处理任务，这对于提高工作效率至关重要。

\end{document}